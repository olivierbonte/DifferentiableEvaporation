# Data downloading

To download the necessary data, first activate the conda python environment as defined by the `environment.yml` (see main `README.md`).  To modify the sites of interest, change the list `sites` in `conf.py`. Then, navigate to the `data_download`folder (important for correct paths) in the terminal and execute the downloads by running scripts (`python SCRIPTNAME.py`) in the following order (or alternatively run `python main.py` for the full pipeline **after manually downloading the dataset described in bullet point 2**):

1. `01_eddy_covariance.py`: Download flux, meteorological and LAI data from [FluxDataKit](https://doi.org/10.5281/zenodo.13748398) via Zenodo. To download data from [PLUMBER 2](http://doi.org/10.25914/5fdb0902607e1) via OpenDAP, manually add the url of interest to `urls` in this python file. License: CC-BY-4.0
2. `02_soil_grids.py`: Download the percentage of clay in the soil from [SoilGrids](https://doi.org/10.5194/soil-7-217-2021
). Data is accessed via the WebCoverageService (WCS) of OGC, example notebooks for use with SoilGrids are given [here](https://git.wur.nl/isric/soilgrids/soilgrids.notebooks). Additionally, Depth available to roots is extracted from the [European Soil Database Derived (ESSD) data](https://esdac.jrc.ec.europa.eu/content/european-soil-database-derived-data#tabs-0-description=0). **ESSD data cannot be automatically downloaded, as a [request form](https://esdac.jrc.ec.europa.eu/content/european-soil-database-derived-data#tabs-0-description=0) has to be filled in to get access**. After getting access, place the raw data in `data/exp_raw/STU_EU_Layers`. SoilGrids license: CC-BY-4.0. ESSD license: only access via request.
3. `03_hihydrosoil.py`: Download hydraulic soil properties (for full list, see the python file) from HiHydroSoil on the Google Earth Engine community catalog (see [here](https://gee-community-catalog.org/projects/hihydro_soil/)) via [Xee](https://github.com/google/Xee/tree/v0.0.14). license: used freely and redistributed with attribution (see [here](https://gee-community-catalog.org/projects/hihydro_soil/#license-information))
4. `04_vegetation_VCF.py`: Download info on the yearly vegetation cover fraction based on MODIS (see [here](https://developers.google.com/earth-engine/datasets/catalog/MODIS_006_MOD44B)) via [cubo](https://github.com/ESDS-Leipzig/cubo)/. The data is originally distributed via [LP DAAC](https://doi.org/10.5067/MODIS/MOD44B.006). License: MODIS data and products acquired through the LP DAAC have no restrictions on subsequent use, sale, or redistribution (see [here](https://developers.google.com/earth-engine/datasets/catalog/MODIS_006_MOD44B#terms-of-use))
5. `05_soil_moisture_fluxnet.py`: As soil moisture data is missing in [FluxDataKit](https://doi.org/10.5281/zenodo.11370417), this is retrieved from [ICOS data portal](https://data.icos-cp.eu/portal/) via the Python API [icoscp](https://icos-carbon-portal.github.io/pylib/icoscp/). To be able to download the data, you need to **make an ICOS account [here](https://cpauth.icos-cp.eu/login/?targetUrl=https%3A%2F%2Fwww.icos-cp.eu%2Fdata-services%2Fabout-data-portal)**, accept the data license in your user profile and give your username and password when running the code. The metadata of the FLUXNET2015 dataset is used for information on the depths of the soil moisture sensors. License (for all ICOS data products): CC-BY-4.0

Output can be found in `data/exp_raw`. 